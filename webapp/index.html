<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>RUActive | Homepage</title> <!-- Title -->
    <link rel="stylesheet" href="Assets/css/Modules/footer.css"/> <!-- Footer CSS -->
    <link rel="stylesheet" href="Assets/css/Modules/header.css"/> <!-- Header CSS -->
    <link rel="stylesheet" href="Assets/css/Pages/home.css"/> <!-- Pages/Home CSS -->
    <link rel="stylesheet" href="Assets/css/main.css"/> <!-- Main CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!-- Font -->
    <link rel="icon" href="Assets/images/logo.png" type="image/png"> <!-- Favicon -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous"> <!-- Bootstrap -->

    <link rel="stylesheet" href="Assets/css/hideDiv.css"/> <!-- Hide Divs -->

    <script src="Assets/javascript/getReportData.js"></script> <!-- JavaScript -->
</head>
<body>
    <!-- Navigation -->
    <div class="ru_nav">
        <ul>
            <li><a class="active" accesskey='u' href="index.html">RUACTIVE</a></li>
            <li><a href="schedule.html" accesskey='s'>Schedule</a></li>
            <li><a href="results_page.html" accesskey='e'>Results</a></li>
            <li><a href="ranking.html" accesskey='r'>Ranking</a></li>
            <li style="float:right" accesskey='h'><a href="Assets/manual.pdf">Help</a></li>
        </ul>
    </div>

    <div id="home">
        <!-- Wallpaper (with Logo) -->
        <div class="wall">
            <div id="map"></div>
            <script>
                    function initMap() {
                      var currentlocation = {lat: -33.312585, lng: 26.519333};
                      var map = new google.maps.Map(document.getElementById('map'), {
                        zoom: 16,
                        center: currentlocation
                      });
                      var Hamilton = new google.maps.Marker({
                        position: {lat: -33.312585, lng: 26.519333},
                        map: map,
                        label: 'C',
                        //animation: google.maps.Animation.BOUNCE,
                        title: "Hamilton Building"
                      });
                      var GreatField = new google.maps.Marker({
                        position: {lat: -33.311755, lng: 26.516361},
                        map: map,
                        label: 'S',
                        title: "Great Field"
                      });
                      var KingField = new google.maps.Marker({
                        position: {lat: -33.313787, lng: 26.513861},
                        map: map,
                        label: 'S',
                        title: "King Field"
                      });
                      var ProspectFields = new google.maps.Marker({
                        position: {lat: -33.312334, lng: 26.510986},
                        map: map,
                        label: 'S',
                        title: "Prospect Fields"
                      });
                      var AstroAtheltics = new google.maps.Marker({
                        position: {lat: -33.312890, lng: 26.509763},
                        map: map,
                        label: 'S',
                        title: "Astro & Athletics Track"
                      });
                      var TennisCourts = new google.maps.Marker({
                        position: {lat: -33.313249, lng: 26.514741},
                        map: map,
                        label: 'S',
                        title: "Tennis Courts"
                      });
                      var MullinsHall = new google.maps.Marker({
                        position: {lat: -33.313069, lng: 26.512746},
                        map: map,
                        label: 'S',
                        title: "Alec Mullins Hall"
                      });
                      var SwimmingPool = new google.maps.Marker({
                        position: {lat: -33.313159, lng: 26.516565},
                        map: map,
                        label: 'S',
                        title: "Swimming pool"
                      });
                      var Library = new google.maps.Marker({
                        position: {lat: -33.314235, lng: 26.518947},
                        map: map,
                        label: 'C',
                        title: "Library",
                      });
                      var EdenGrove = new google.maps.Marker({
                        position: {lat: -33.314504, lng: 26.521865},
                        map: map,
                        //label: 'C',
                        animation: google.maps.Animation.BOUNCE,
                        title: "Eden Grove"
                      });
                    }
            </script>
            <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDrOhCPmjp_C8rKgXU9cYeNvrB0-5L9Vxk&callback=initMap">
            </script>
            <div class="Logo_placement">
                <img src="Assets/images/logo.png" alt="RUActive Logo"/>
            </div>
        </div>

        <!-- Message Board -->
        <div class="message_board">
            <p class="head">Message Board</p>
            <div id="announcements_id" class="announcements">
            </div>
        </div>

        <!-- Latest Events -->
        <div class="latest_event">
            <div class="Event_Update">
                <p class="head">Upcoming Event Details</p>
                <table id='table_event'>
                    <!-- -->
                </table>
            </div>
            <div class="Event_Image">
                <div class="team_1">
                    <img src="Assets/images/team_1.png" alt="placeholder"/>
                </div>
                <div class="team_detail">
                    <p class="name" id="team_1">Calacha</p>
                    <p id="VS">VS</p>
                    <p class="name" id="team_2">Joe Slovo</p>
                </div>
                <div class="team_2">
                    <img src="Assets/images/team_2.png" alt="placeholder"/>
                </div>
            </div>
        </div>

    </div>
    <!-- Footer -->
    <footer>
      <p>Copyright &copy 2017, Original Xception. All Rights Reserved.</p>
  </footer>

    <div id="announcement_div" class="hide">
      <script type="text/javascript" src="https://c0abd423.caspio.com/scripts/embed.js"></script>
      <script type="text/javascript">try{f_cbload(true, "c0abd423.caspio.com", "aaa950007da10177fc3c461ca97c");}catch(v_e){;}</script>
      <div class="cxkg"><a href="https://c0abd423.caspio.com/dp.asp?AppKey=aaa950007da10177fc3c461ca97c">Click here</a> to load this Caspio <a href="http://www.caspio.com" target="_blank" title="Cloud Database">Cloud Database</a></div>
      <div id="cbaaa950007da10177fc3c461ca97c"><a href="https://www.caspio.com" target="_blank">Cloud Database</a> by Caspio</div>
    </div>

    <div id="latest_event_div" class="hide">
      <script type="text/javascript" src="https://c0abd423.caspio.com/scripts/embed.js"></script>
      <script type="text/javascript">try{f_cbload(true, "c0abd423.caspio.com", "aaa950005a69a22a2708474e9e6a");}catch(v_e){;}</script>
      <div class="cxkg"><a href="https://c0abd423.caspio.com/dp.asp?AppKey=aaa950005a69a22a2708474e9e6a">Click here</a> to load this Caspio <a href="http://www.caspio.com" target="_blank" title="Cloud Database">Cloud Database</a></div>
      <div id="cbaaa950005a69a22a2708474e9e6a"><a href="https://www.caspio.com" target="_blank">Cloud Database</a> by Caspio</div>
    </div>

    <script>

      var announcement_div = document.getElementById('announcement_div');
      var latest_event_div = document.getElementById('latest_event_div');
      var alldata = stripCaspioReport(announcement_div);

      for (var idx=0; idx<alldata.length; idx+=1) {
        var template = `<p><strong>${alldata[idx]['date posted']}</strong> - <strong>${alldata[idx]['sender']}</strong> </br>${alldata[idx]['message body']}</p>`;
        document.getElementById('announcements_id').innerHTML += template;
      }

      var alldata = stripCaspioReport(latest_event_div)[0];

	  var alldata = stripCaspioReport(latest_event_div);
      var monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
      var currdate = new Date();
      var currtime = currdate.getTime();
      var tmp = new Date("01/01/3000");
      var tmptime = tmp.getTime();
      var chosenid = 0;
      for(var i = 0;i<alldata.length;i++){
        var tmp1 = alldata[i]['event date'];
        var tmp1formatted = new Date((monthNames.indexOf(tmp1.substring(3, tmp1.length-5))+1)+'/'+tmp1.substring(0, 2)+'/'+tmp1.substring(tmp1.length-4, tmp1.length));//requires format mm/dd/yyyy
        var tmp1time = tmp1formatted.getTime();
        if(tmp1time >= currtime && tmp1time <= tmptime){
            tmptime = tmp1time;
            chosenid = i;
        }
      }

      var template = `<tr class="event_upt name">
                        <td><strong>NAME:</strong> </td>
                        <td class="info">${alldata[chosenid]['name']}</td>
                    </tr>
                    <tr class="event_upt date">
                        <td><strong>DATE:</strong> </td>
                        <td class="info">${alldata[chosenid]['event date']}</td>
                    </tr>
                    <tr class="event_upt time">
                        <td><strong>TIME:</strong> </td>
                        <td class="info">${alldata[chosenid]['event start time']}</td>
                    </tr>
                    <tr class="event_upt place">
                        <td><strong>PLACE:</strong> </td>
                        <td class="info">${alldata[chosenid]['event venue']}</td>
                    </tr>
                    <tr class="event_upt sport">
                        <td><strong>SPORT:</strong> </td>
                        <td class="info">${alldata[chosenid]['sport']}</td>
                    </tr>`;
      document.getElementById('table_event').innerHTML = template;

    </script>

      <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>
</body>
</html>
