<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>RUActive | Results Page</title>
  <link rel="stylesheet" href="Assets/css/Modules/footer.css"/> <!-- Footer CSS -->
  <link rel="stylesheet" href="Assets/css/Modules/header.css"/> <!-- Header CSS -->
  <link rel="stylesheet" href="Assets/css/Pages/results_page.css"/> <!-- Pages/Event CSS -->
  <link rel="stylesheet" href="Assets/css/main.css"/> <!-- Main CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!-- Font -->
  <link rel="icon" href="Assets/images/logo.png" type="image/png"> <!-- Favicon -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous"> <!-- Bootstrap -->
  <link rel="stylesheet" href="Assets/css/hideDiv.css"/>  <!-- Hide Divs -->
  <script src="Assets/javascript/RoleLookUp.js">  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body onload="returnResult()">
  <!-- Navigation -->
  <div class="ru_nav">
    <ul>
      <li><a href="index.html">RUACTIVE</a></li>
      <li><a href="schedule.html">Schedule</a></li>
      <li><a class="active" href="results_page.html">Results</a></li>
      <li><a href="ranking.html">Ranking</a></li>
      <li style="float:right"><a href="Assets/manual.pdf">Help</a></li>
    </ul>
  </div>

  <!-- Search -->
  <div class ="search">
    <a href="#search"><div class="Add">
        Search...
      </div></a>
  </div>

  <div class = "add event">
      <div class = "ranking_list">
          <div class="report r_event">
              <table id="rankingTable">
                <tr>
                  <th>Event Name</th>
                  <th>Team Name</th>
                  <th>Residence</th>
                  <th>Position</th>
                </tr>
              </table>
            </div>
      </div>
  </div>

  <div id="search">
      <button type="button" class="close">Ã—</button>
      <form>
          <input type="search" id="searchE"value="" placeholder="type event name here" />
          <button type="button" id="searchBtn" onclick="searchbyName()"class="btn btn-primary Update">Search</button>
      </form>
  </div>


  <!-- Footer -->
  <footer>
    <p>Copyright &copy 2017, Original Xception. All Rights Reserved.</p>
  </footer>

    <div id="results" class="hide">
      <script type="text/javascript" src="https://c0abd423.caspio.com/scripts/embed.js"></script>
  <script type="text/javascript">try{f_cbload(true, "c0abd423.caspio.com", "aaa95000c9cf29a4c8c6454b8dab");}catch(v_e){;}</script>
  <div class="cxkg"><a href="https://c0abd423.caspio.com/dp.asp?AppKey=aaa95000c9cf29a4c8c6454b8dab">Click here</a> to load this Caspio <a href="http://www.caspio.com" target="_blank" title="Cloud Database">Cloud Database</a></div>
  <div id="cbaaa95000c9cf29a4c8c6454b8dab"><a href="https://www.caspio.com" target="_blank">Cloud Database</a> by Caspio</div>
    </div>


    <script src="Assets/javascript/getReportData.js">
    </script>

    <script type="text/javascript">
    function searchbyName() {
      var re = stripCaspioReport(document.getElementById('results'));
      var name = document.getElementById('searchE').value;
      console.log(name);
      document.getElementById('rankingTable').innerHTML = "";
      var template = `<th>Event Name</th>
                     <th>Residence</th>
                     <th>Position</th>`
      document.getElementById('rankingTable').innerHTML = template;
      if(name === "") returnResult();
      for (var i = 0; i < re.length; i++) {
        //console.log(re[0]["team's residence"]);
        if(re[i]['event name'].toLowerCase() === name.toLowerCase()){
        var template = `<tr>
        <td>${re[i]["event name"]}</td>
        <td>${re[i]["team id"]}</td>
        <td>${re[i]["team\'s residence"]}</td>
        <td>${re[i]['competition position']}</td>
        </tr>`


        document.getElementById('rankingTable').innerHTML += template;
      }

    }
     document.getElementById('id_event_name').value =""
    var name = document.getElementById('id_event_name').value;
  }
    function returnResult(){
      var re = stripCaspioReport(document.getElementById('results'));
      for (var i = 0; i < re.length; i++) {
        var template = `<tr>
        <td>${re[i]["event name"]}</td>
        <td>${re[i]["team id"]}</td>
        <td>${re[i]["team\'s residence"]}</td>
        <td>${re[i]['competition position']}</td>
        </tr>`
        document.getElementById('rankingTable').innerHTML += template;

      }

    }

    </script>




  </body>
  </html>
