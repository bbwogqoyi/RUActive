<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>RUActive | Add Event</title> <!-- Title -->
  <link rel="stylesheet" href="Assets/css/Modules/footer.css"/> <!-- Footer CSS -->
  <link rel="stylesheet" href="Assets/css/Modules/header.css"/> <!-- Header CSS -->
  <link rel="stylesheet" href="Assets/css/Pages/event.css"/> <!-- Pages/Event CSS -->
  <link rel="stylesheet" href="Assets/css/main.css"/> <!-- Main CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!-- Font -->
  <link rel="icon" href="Assets/images/logo.png" type="image/png"> <!-- Favicon -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous"> <!-- Bootstrap -->
  <link rel="stylesheet" href="Assets/css/hideDiv.css"/>  <!-- Hide Divs -->
  <script src="Assets/javascript/RoleLookUp.js">  </script> <!-- JavaScript -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> <!-- JavaScript -->
</head>
<body>
  <!-- Navigation -->
  <div class="ru_nav">
    <ul>
      <li class="Logo"><a href="profile.html"><img src="Assets/images/logo.png"  alt="RUACTIVE Logo"></a></li>
      <li style="float:right"><a href="Assets/manual.pdf">Help</a></li>
    </ul>
  </div>

  <!-- Form Section-->
  <div class = "add event">

    <!-- Info -->
    <div class="info event">
      <h1>ADD EVENT</h1>
      <p>This form serves to assist the user in the process of adding one or more events to the Competition Schedule.</p>
    </div>

    <!-- Form -->
    <div class = "form event">
      <form>
        <div class = "form-group row"> <!-- Event Name -->
          <label for = "id_event_name" class = "col-sm-4 col-form-label">Event Name</label>
          <div class = "col-sm-7">
            <input type = "text" class = "form-control" id = "id_event_name" name = "#" placeholder = "Soccer Saga">
          </div>
        </div>
        <div class = "form-group row"> <!-- Event Type -->
          <label for = "id_event_type" class = "col-sm-4 col-form-label">Event Type</label>
          <div class = "col-sm-7">
            <select class="form-control" id="id_event_type">
              <option>-</option>
              <option>Competitive</option>
              <option>Social</option>
              <option>Non-Inter Res</option>

            </select>
          </div>
        </div>
        <div class = "form-group row"> <!-- Sports Code -->
          <label for = "id_sports_code" class = "col-sm-4 col-form-label">Sports Code</label>
          <div class = "col-sm-7">
            <input disabled type = "text" class = "form-control" id = "id_sports_code" name = "#" placeholder = "Soccer">
          </div>
        </div>
        <div class = "form-group row"> <!-- Date -->
          <label for = "id_event_date"  data-date-format="DD MMMM YYYY" class = "col-sm-4 col-form-label">Date</label>
          <div class = "col-sm-7">
            <input type = "date" class = "form-control" id = "id_event_date" name = "#" placeholder = "05 05 2016">
          </div>
        </div>

        <div class = "form-group row"> <!-- Facility Types -->
          <label for = "id_facility_type" class = "col-sm-4 col-form-label">Facility Types</label>
          <div class = "col-sm-7">
            <select onchange="getVenues()" class="form-control" id="id_facility_type">
              <option>-</option>
              <option>Sports Venues</option>
              <option>Central Venues</option>
            </select>
          </div>
        </div>

        <div class = "form-group row"> <!-- Venue -->
          <label for = "id_event_venue" class = "col-sm-4 col-form-label">Venue</label>
          <div class = "col-sm-7">
            <select class="form-control" id="id_event_venue">
              <option >-</option>
            </select>
          </div>
        </div>
        <div class = "form-group row"> <!-- Start -->
          <label for = "id_event_duration" class = "col-sm-4 col-form-label">Start</label>
          <div class = "col-sm-7">
            <input type = "time" class = "form-control" id = "id_event_duration" name = "#" placeholder = "#">
          </div>
        </div>
        <div class = "form-group row"> <!-- Registration Deadline -->
          <label for = "id_reg_date"  data-date-format="DD MMMM YYYY" class = "col-sm-4 col-form-label">Registration Deadline</label>
          <div class = "col-sm-7">
            <input type = "date" class = "form-control" id = "id_reg_date" name = "#" placeholder = "">
          </div>
        </div>
        <div class = "form-group row"> <!-- Maximum Team Players -->
          <label for = "id_max_players" class = "col-sm-4 col-form-label">Maximum Team Players</label>
          <div class = "col-sm-7">
            <input type = "text" class = "form-control" id = "id_max_players" name = "#" placeholder = "0">
          </div>
        </div>
        <div class = "form-group row"> <!-- Description -->
          <label for = "id_event_desc" class = "col-sm-4 col-form-label">Description</label>
          <div class = "col-sm-7">
            <textarea id="id_event_desc" class = "form-control" rows="4" cols="50" placeholder="A description to clarifying the details of the event."<> </textarea>
          </div>
        </div>
        <div class = "form-group row"> <!-- Fixture -->
          <label for = "id_fixtures" class = "col-sm-4 col-form-label">Fixture</label>
          <div class = "col-sm-7">
            <select class="form-control" id="id_fixtures">
              <option>-</option>
              <option >Yes</option>
              <option>No</option>
            </select>
          </div>
        </div>

        <!-- Button -->
        <div class="form-group row button">
            <label for = "id_fixtures" class = "col-sm-4 col-form-label"></label>
          <div class="col-sm-7">
            <a href="profile.html"><button type="button" class="btn btn-primary btn-lg Cancel" id="adding">Cancel</button></a><button type="button" onclick="submitForm()" class="btn btn-primary btn-lg Add" id="adding">Add Event</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <p>Copyright &copy 2017, Original Xception. All Rights Reserved.</p>
  </footer>

<!-- JavaScript -->
<div class="hide" id="submit_event">
<script type="text/javascript" src="https://c0abd423.caspio.com/scripts/embed.js"></script>
<script type="text/javascript">try{f_cbload(true, "c0abd423.caspio.com", "aaa950003a2237dd5b57437d821b");}catch(v_e){;}</script>
<div class="cxkg"><a href="https://c0abd423.caspio.com/dp.asp?AppKey=aaa950003a2237dd5b57437d821b">Click here</a> to load this Caspio <a href="http://www.caspio.com" target="_blank" title="Cloud Database">Cloud Database</a></div>
<div id="cbaaa950003a2237dd5b57437d821b"><a href="https://www.caspio.com" target="_blank">Cloud Database</a> by Caspio</div>
</div>
  <div id="venueDiv" class="hide">
    <script type="text/javascript" src="https://c0abd423.caspio.com/scripts/embed.js"></script>
    <script type="text/javascript">try{f_cbload(true, "c0abd423.caspio.com", "aaa950000da39d438ee94929ad77");}catch(v_e){;}</script>
    <div class="cxkg"><a href="https://c0abd423.caspio.com/dp.asp?AppKey=aaa950000da39d438ee94929ad77">
      Click here</a> to load this Caspio <a href="http://www.caspio.com" target="_blank" title="Cloud Database">Cloud Database</a></div>
      <div id="cbaaa950000da39d438ee94929ad77"><a href="https://www.caspio.com" target="_blank">Cloud Database</a> by Caspio</div>
    </div>
	<br><br><br><br><br>


    <script src="Assets/javascript/getReportData.js"></script>
    <script type="text/javascript">
      // if user is not authenticated redirect to login page
      $(document).ready(function(){
        var a = IsAuthenticated();
        if(!IsAuthenticated()) location.href = "login.html";
      });

      var sport = getSessionUser()['EditRecordSports'];
      document.getElementById('id_sports_code').value =sport

      function getVenues(){
        var type = document.getElementById('id_facility_type').value;
        var isSportsVenue = type;
        switch(type) {
          case "Central Venues":
          isSportsVenue = 'No';
          break;
          case "Sports Venues":
          isSportsVenue = 'Yes';
          break;
        }
        document.getElementById('id_event_venue').innerHTML ="";
        var venueDiv = document.getElementById('venueDiv');
        var allvenues = stripCaspioReport(venueDiv);
        for (var i = 0; i < allvenues.length; i+=1) {
          var elmOption = document.createElement('option');
          if(allvenues[i]['issportvenue'] === isSportsVenue){
            elmOption.text = allvenues[i]['name'];
            elmOption.value = allvenues[i]['venue id'];
            document.getElementById('id_event_venue').add(elmOption);
      }}}

      function submitForm(){
        var caspio_form = document.getElementById('caspioform');
        var profile = ['id_event_name', 'id_event_desc', 'id_event_venue','id_max_players'];
        var caspioIds = ['InsertRecordName', 'InsertRecordDescription', 'InsertRecordEvent_Venue', 'InsertRecordMaximum_players'];

        for(var i=0; i<caspioIds.length; i+=1){
          var current_value = document.getElementById(profile[i]).value;
          document.getElementById(caspioIds[i]).value = current_value;
        }
        if(document.getElementById('id_fixtures').value == 'Yes'){
          document.getElementById('InsertRecordhasFixtures').checked = true;
        } else {
          document.getElementById('InsertRecordhasFixtures').checked = false;
        }

        var input_dates = ['id_event_date','id_reg_date'];
        var new_dates = ['InsertRecordEvent_Date', 'InsertRecordRegistration_Deadline'];
        for (var i=0; i<input_dates.length; i+=1) //(i ===3 ||i === 4)
        {
          var current_value = document.getElementById(input_dates[i]).value;
          current_value = current_value.split('-').reverse().join('/');
          document.getElementById(new_dates[i]).value = current_value;
        }
        var current_value = document.getElementById('id_event_type').value;
        current_value = eventTypeLookup(current_value);
        document.getElementById('InsertRecordEvent_Type').value = current_value;

        var user = getSessionUser();
        document.getElementById('InsertRecordSport').value= user.EditRecordSports;

        caspio_form.submit();
      }
    </script>
  </body>
  </html>
